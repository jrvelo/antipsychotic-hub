<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Antipsychotic Medication Matrices - NURS 573</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 20px;
        }
        
        .header h1 {
            color: #2d3748;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #718096;
            font-size: 1.2em;
        }
        
        .progress-container {
            background: #f7fafc;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e2e8f0;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38a169);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .matrix-nav {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .nav-button {
            padding: 10px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
        }
        
        .nav-button.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .nav-button.completed {
            background: #48bb78;
            color: white;
            border-color: #48bb78;
        }
        
        .nav-button.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .matrix-section {
            display: none;
        }
        
        .matrix-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .matrix-title {
            font-size: 2em;
            color: #2d3748;
            margin-bottom: 10px;
        }
        
        .matrix-description {
            color: #718096;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        
        .matrix-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
            overflow-x: auto;
            display: block;
        }
        
        .matrix-table table {
            width: 100%;
            min-width: 800px;
        }
        
        .matrix-table th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
        }
        
        .matrix-table th:first-child {
            background: #5a67d8;
        }
        
        .matrix-table td {
            padding: 12px 15px;
            border: 1px solid #e2e8f0;
        }
        
        .matrix-table tr:nth-child(even) {
            background: #f7fafc;
        }
        
        .matrix-table td:first-child {
            font-weight: 600;
            background: #edf2f7;
            color: #2d3748;
        }
        
        select {
            width: 100%;
            padding: 8px;
            border: 2px solid #e2e8f0;
            border-radius: 5px;
            font-size: 0.95em;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s;
        }
        
        select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        select.correct {
            border-color: #48bb78;
            background: #f0fff4;
        }
        
        select.incorrect {
            border-color: #f56565;
            background: #fff5f5;
        }
        
        .button-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }
        
        .btn {
            padding: 15px 40px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #e2e8f0;
            color: #2d3748;
        }
        
        .btn-secondary:hover {
            background: #cbd5e0;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            display: none;
        }
        
        .feedback.success {
            background: #c6f6d5;
            color: #22543d;
            border: 2px solid #48bb78;
        }
        
        .feedback.error {
            background: #fed7d7;
            color: #742a2a;
            border: 2px solid #f56565;
        }
        
        .certificate {
            display: none;
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #f6f8fb 0%, #ffffff 100%);
            border-radius: 15px;
            border: 5px solid #667eea;
        }
        
        .certificate.active {
            display: block;
        }
        
        .certificate h2 {
            font-size: 2.5em;
            color: #2d3748;
            margin-bottom: 20px;
        }
        
        .certificate-content {
            margin: 30px 0;
            line-height: 2;
        }
        
        .student-name-display {
            font-size: 1.8em;
            color: #667eea;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .completion-date {
            font-style: italic;
            color: #718096;
            margin-top: 20px;
        }
        
        .completion-table {
            margin: 30px auto;
            max-width: 600px;
            text-align: left;
        }
        
        .completion-table td {
            padding: 10px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .completion-table td:first-child {
            font-weight: bold;
            color: #2d3748;
        }
        
        .pdf-instructions {
            background: #fef5e7;
            border: 2px solid #f39c12;
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
            text-align: left;
        }
        
        .pdf-instructions h3 {
            color: #d68910;
            margin-bottom: 15px;
        }
        
        .pdf-instructions ol {
            margin-left: 20px;
        }
        
        .pdf-instructions li {
            margin: 10px 0;
            line-height: 1.6;
        }
        
        .student-info {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .student-info label {
            display: block;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 5px;
        }
        
        .student-info input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 5px;
            font-size: 1em;
        }
        
        .student-info input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        @media print {
            body {
                background: white;
            }
            
            .progress-container,
            .matrix-nav,
            .button-container,
            .nav-button {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ§  Antipsychotic Medication Matrices</h1>
            <p>NURS 573 - Progressive Learning System</p>
        </div>
        
        <div class="student-info" id="studentInfoSection">
            <label for="studentName">Student Name:</label>
            <input type="text" id="studentName" placeholder="Enter your full name" required>
            <label for="studentEmail" style="margin-top: 15px;">Email:</label>
            <input type="email" id="studentEmail" placeholder="Enter your email" required>
            <div class="button-container">
                <button class="btn btn-primary" onclick="saveStudentInfo()">Begin Matrices</button>
            </div>
        </div>
        
        <div id="mainContent" style="display: none;">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill">0%</div>
                </div>
                <div class="matrix-nav" id="matrixNav"></div>
            </div>
            
            <!-- Matrix 1: Core Foundations -->
            <div class="matrix-section" id="matrix1">
                <h2 class="matrix-title">Matrix 1: Core Foundations</h2>
                <p class="matrix-description">Compare class-level patterns across antipsychotic generations</p>
                
                <div class="matrix-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Characteristic</th>
                                <th>First-Generation (FGAs)</th>
                                <th>Classic Second-Generation (SGAs)</th>
                                <th>Newer Second-Generation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>MOA</td>
                                <td><select data-answer="D2 antagonist (strong blockade)">
                                    <option value="">Select...</option>
                                    <option value="D2 antagonist (strong blockade)">D2 antagonist (strong blockade)</option>
                                    <option value="D2 + 5-HT2A antagonist">D2 + 5-HT2A antagonist</option>
                                    <option value="D2 partial agonist">D2 partial agonist</option>
                                    <option value="Multi-receptor modulator">Multi-receptor modulator</option>
                                </select></td>
                                <td><select data-answer="D2 + 5-HT2A antagonist">
                                    <option value="">Select...</option>
                                    <option value="D2 antagonist (strong blockade)">D2 antagonist (strong blockade)</option>
                                    <option value="D2 + 5-HT2A antagonist">D2 + 5-HT2A antagonist</option>
                                    <option value="D2 partial agonist">D2 partial agonist</option>
                                    <option value="Multi-receptor modulator">Multi-receptor modulator</option>
                                </select></td>
                                <td><select data-answer="D2 partial agonist">
                                    <option value="">Select...</option>
                                    <option value="D2 antagonist (strong blockade)">D2 antagonist (strong blockade)</option>
                                    <option value="D2 + 5-HT2A antagonist">D2 + 5-HT2A antagonist</option>
                                    <option value="D2 partial agonist">D2 partial agonist</option>
                                    <option value="Multi-receptor modulator">Multi-receptor modulator</option>
                                </select></td>
                            </tr>
                            <tr>
                                <td>Primary FDA Use</td>
                                <td><select data-answer="Schizophrenia, acute psychosis">
                                    <option value="">Select...</option>
                                    <option value="Schizophrenia, acute psychosis">Schizophrenia, acute psychosis</option>
                                    <option value="Schizophrenia, bipolar mania">Schizophrenia, bipolar mania</option>
                                    <option value="Schizophrenia, MDD adjunct">Schizophrenia, MDD adjunct</option>
                                    <option value="Treatment-resistant cases">Treatment-resistant cases</option>
                                </select></td>
                                <td><select data-answer="Schizophrenia, bipolar mania">
                                    <option value="">Select...</option>
                                    <option value="Schizophrenia, acute psychosis">Schizophrenia, acute psychosis</option>
                                    <option value="Schizophrenia, bipolar mania">Schizophrenia, bipolar mania</option>
                                    <option value="Schizophrenia, MDD adjunct">Schizophrenia, MDD adjunct</option>
                                    <option value="Treatment-resistant cases">Treatment-resistant cases</option>
                                </select></td>
                                <td><select data-answer="Schizophrenia, MDD adjunct">
                                    <option value="">Select...</option>
                                    <option value="Schizophrenia, acute psychosis">Schizophrenia, acute psychosis</option>
                                    <option value="Schizophrenia, bipolar mania">Schizophrenia, bipolar mania</option>
                                    <option value="Schizophrenia, MDD adjunct">Schizophrenia, MDD adjunct</option>
                                    <option value="Treatment-resistant cases">Treatment-resistant cases</option>
                                </select></td>
                            </tr>
                            <tr>
                                <td>Common SE (Top 3)</td>
                                <td><select data-answer="EPS, sedation, anticholinergic">
                                    <option value="">Select...</option>
                                    <option value="EPS, sedation, anticholinergic">EPS, sedation, anticholinergic</option>
                                    <option value="Weight gain, metabolic, sedation">Weight gain, metabolic, sedation</option>
                                    <option value="Akathisia, nausea, activation">Akathisia, nausea, activation</option>
                                    <option value="Minimal side effects">Minimal side effects</option>
                                </select></td>
                                <td><select data-answer="Weight gain, metabolic, sedation">
                                    <option value="">Select...</option>
                                    <option value="EPS, sedation, anticholinergic">EPS, sedation, anticholinergic</option>
                                    <option value="Weight gain, metabolic, sedation">Weight gain, metabolic, sedation</option>
                                    <option value="Akathisia, nausea, activation">Akathisia, nausea, activation</option>
                                    <option value="Minimal side effects">Minimal side effects</option>
                                </select></td>
                                <td><select data-answer="Akathisia, nausea, activation">
                                    <option value="">Select...</option>
                                    <option value="EPS, sedation, anticholinergic">EPS, sedation, anticholinergic</option>
                                    <option value="Weight gain, metabolic, sedation">Weight gain, metabolic, sedation</option>
                                    <option value="Akathisia, nausea, activation">Akathisia, nausea, activation</option>
                                    <option value="Minimal side effects">Minimal side effects</option>
                                </select></td>
                            </tr>
                            <tr>
                                <td>Major Risk</td>
                                <td><select data-answer="Tardive dyskinesia, NMS">
                                    <option value="">Select...</option>
                                    <option value="Tardive dyskinesia, NMS">Tardive dyskinesia, NMS</option>
                                    <option value="Metabolic syndrome, DM">Metabolic syndrome, DM</option>
                                    <option value="Compulsive behaviors">Compulsive behaviors</option>
                                    <option value="QTc prolongation">QTc prolongation</option>
                                </select></td>
                                <td><select data-answer="Metabolic syndrome, DM">
                                    <option value="">Select...</option>
                                    <option value="Tardive dyskinesia, NMS">Tardive dyskinesia, NMS</option>
                                    <option value="Metabolic syndrome, DM">Metabolic syndrome, DM</option>
                                    <option value="Compulsive behaviors">Compulsive behaviors</option>
                                    <option value="QTc prolongation">QTc prolongation</option>
                                </select></td>
                                <td><select data-answer="Compulsive behaviors">
                                    <option value="">Select...</option>
                                    <option value="Tardive dyskinesia, NMS">Tardive dyskinesia, NMS</option>
                                    <option value="Metabolic syndrome, DM">Metabolic syndrome, DM</option>
                                    <option value="Compulsive behaviors">Compulsive behaviors</option>
                                    <option value="QTc prolongation">QTc prolongation</option>
                                </select></td>
                            </tr>
                            <tr>
                                <td>When to Avoid</td>
                                <td><select data-answer="Parkinson's, Lewy body dementia">
                                    <option value="">Select...</option>
                                    <option value="Parkinson's, Lewy body dementia">Parkinson's, Lewy body dementia</option>
                                    <option value="Diabetes, obesity, metabolic syndrome">Diabetes, obesity, metabolic syndrome</option>
                                    <option value="History of compulsive disorders">History of compulsive disorders</option>
                                    <option value="Elderly with dementia">Elderly with dementia</option>
                                </select></td>
                                <td><select data-answer="Diabetes, obesity, metabolic syndrome">
                                    <option value="">Select...</option>
                                    <option value="Parkinson's, Lewy body dementia">Parkinson's, Lewy body dementia</option>
                                    <option value="Diabetes, obesity, metabolic syndrome">Diabetes, obesity, metabolic syndrome</option>
                                    <option value="History of compulsive disorders">History of compulsive disorders</option>
                                    <option value="Elderly with dementia">Elderly with dementia</option>
                                </select></td>
                                <td><select data-answer="History of compulsive disorders">
                                    <option value="">Select...</option>
                                    <option value="Parkinson's, Lewy body dementia">Parkinson's, Lewy body dementia</option>
                                    <option value="Diabetes, obesity, metabolic syndrome">Diabetes, obesity, metabolic syndrome</option>
                                    <option value="History of compulsive disorders">History of compulsive disorders</option>
                                    <option value="Elderly with dementia">Elderly with dementia</option>
                                </select></td>
                            </tr>
                            <tr>
                                <td>DC Challenge</td>
                                <td><select data-answer="Withdrawal dystonia, cholinergic rebound">
                                    <option value="">Select...</option>
                                    <option value="Withdrawal dystonia, cholinergic rebound">Withdrawal dystonia, cholinergic rebound</option>
                                    <option value="Rebound insomnia, anxiety">Rebound insomnia, anxiety</option>
                                    <option value="Minimal (long half-life)">Minimal (long half-life)</option>
                                    <option value="Psychosis rebound">Psychosis rebound</option>
                                </select></td>
                                <td><select data-answer="Rebound insomnia, anxiety">
                                    <option value="">Select...</option>
                                    <option value="Withdrawal dystonia, cholinergic rebound">Withdrawal dystonia, cholinergic rebound</option>
                                    <option value="Rebound insomnia, anxiety">Rebound insomnia, anxiety</option>
                                    <option value="Minimal (long half-life)">Minimal (long half-life)</option>
                                    <option value="Psychosis rebound">Psychosis rebound</option>
                                </select></td>
                                <td><select data-answer="Minimal (long half-life)">
                                    <option value="">Select...</option>
                                    <option value="Withdrawal dystonia, cholinergic rebound">Withdrawal dystonia, cholinergic rebound</option>
                                    <option value="Rebound insomnia, anxiety">Rebound insomnia, anxiety</option>
                                    <option value="Minimal (long half-life)">Minimal (long half-life)</option>
                                    <option value="Psychosis rebound">Psychosis rebound</option>
                                </select></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="button-container">
                    <button class="btn btn-primary" onclick="checkAnswers(1)">Check Answers</button>
                    <button class="btn btn-secondary" onclick="resetMatrix(1)">Reset</button>
                </div>
                
                <div class="feedback" id="feedback1"></div>
            </div>
            
            <!-- Matrix 2: Mini Matrix A (FGAs) -->
            <div class="matrix-section" id="matrix2">
                <h2 class="matrix-title">Matrix 2: First-Generation Antipsychotics</h2>
                <p class="matrix-description">Compare individual FGAs ordered by EPS risk (low to high potency)</p>
                
                <div class="matrix-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Characteristic</th>
                                <th>Chlorpromazine (Thorazine)</th>
                                <th>Fluphenazine (Prolixin)</th>
                                <th>Haloperidol (Haldol)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>When to Choose First</td>
                                <td><select data-answer="N/A (rarely first choice)">
                                    <option value="">Select...</option>
                                    <option value="N/A (rarely first choice)">N/A (rarely first choice)</option>
                                    <option value="Chronic schizophrenia, LAI needed">Chronic schizophrenia, LAI needed</option>
                                    <option value="Acute agitation, IM needed">Acute agitation, IM needed</option>
                                    <option value="Psychosis with sedation needed">Psychosis with sedation needed</option>
                                </select></td>
                                <td><select data-answer="Chronic schizophrenia, LAI needed">
                                    <option value="">Select...</option>
                                    <option value="N/A (rarely first choice)">N/A (rarely first choice)</option>
                                    <option value="Chronic schizophrenia, LAI needed">Chronic schizophrenia, LAI needed</option>
                                    <option value="Acute agitation, IM needed">Acute agitation, IM needed</option>
                                    <option value="Psychosis with sedation needed">Psychosis with sedation needed</option>
                                </select></td>
                                <td><select data-answer="Acute agitation, IM needed">
                                    <option value="">Select...</option>
                                    <option value="N/A (rarely first choice)">N/A (rarely first choice)</option>
                                    <option value="Chronic schizophrenia, LAI needed">Chronic schizophrenia, LAI needed</option>
                                    <option value="Acute agitation, IM needed">Acute agitation, IM needed</option>
                                    <option value="Psychosis with sedation needed">Psychosis with sedation needed</option>
                                </select></td>
                            </tr>
                            <tr>
                                <td>When to Avoid</td>
                                <td><select data-answer="CV instability, elderly">
                                    <option value="">Select...</option>
                                    <option value="CV instability, elderly">CV instability, elderly</option>
                                    <option value="Parkinson's, movement disorders">Parkinson's, movement disorders</option>
                                    <option value="QTc prolongation risk">QTc prolongation risk</option>
                                    <option value="Severe liver disease">Severe liver disease</option>
                                </select></td>
                                <td><select data-answer="Parkinson's, movement disorders">
                                    <option value="">Select...</option>
                                    <option value="CV instability, elderly">CV instability, elderly</option>
                                    <option value="Parkinson's, movement disorders">Parkinson's, movement disorders</option>
                                    <option value="QTc prolongation risk">QTc prolongation risk</option>
                                    <option value="Severe liver disease">Severe liver disease</option>
                                </select></td>
                                <td><select data-answer="QTc prolongation risk">
                                    <option value="">Select...</option>
                                    <option value="CV instability, elderly">CV instability, elderly</option>
                                    <option value="Parkinson's, movement disorders">Parkinson's, movement disorders</option>
                                    <option value="QTc prolongation risk">QTc prolongation risk</option>
                                    <option value="Severe liver disease">Severe liver disease</option>
                                </select></td>
                            </tr>
                            <tr>
                                <td>DC Challenge</td>
                                <td><select data-answer="Anticholinergic rebound, orthostasis">
                                    <option value="">Select...</option>
                                    <option value="Anticholinergic rebound, orthostasis">Anticholinergic rebound, orthostasis</option>
                                    <option value="Withdrawal dystonia">Withdrawal dystonia</option>
                                    <option value="Cholinergic rebound, EPS worsening">Cholinergic rebound, EPS worsening</option>
                                    <option value="Psychosis relapse">Psychosis relapse</option>
                                </select></td>
                                <td><select data-answer="Withdrawal dystonia">
                                    <option value="">Select...</option>
                                    <option value="Anticholinergic rebound, orthostasis">Anticholinergic rebound, orthostasis</option>
                                    <option value="Withdrawal dystonia">Withdrawal dystonia</option>
                                    <option value="Cholinergic rebound, EPS worsening">Cholinergic rebound, EPS worsening</option>
                                    <option value="Psychosis relapse">Psychosis relapse</option>
                                </select></td>
                                <td><select data-answer="Cholinergic rebound, EPS worsening">
                                    <option value="">Select...</option>
                                    <option value="Anticholinergic rebound, orthostasis">Anticholinergic rebound, orthostasis</option>
                                    <option value="Withdrawal dystonia">Withdrawal dystonia</option>
                                    <option value="Cholinergic rebound, EPS worsening">Cholinergic rebound, EPS worsening</option>
                                    <option value="Psychosis relapse">Psychosis relapse</option>
                                </select></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="button-container">
                    <button class="btn btn-primary" onclick="checkAnswers(2)">Check Answers</button>
                    <button class="btn btn-secondary" onclick="resetMatrix(2)">Reset</button>
                </div>
                
                <div class="feedback" id="feedback2"></div>
            </div>
            
            <!-- Matrix 3: Mini Matrix B (Classic SGAs) -->
            <div class="matrix-section" id="matrix3">
                <h2 class="matrix-title">Matrix 3: Classic Second-Generation Antipsychotics</h2>
                <p class="matrix-description">Compare Classic SGAs ordered by metabolic burden (low to high)</p>
                
                <div class="matrix-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Characteristic</th>
                                <th>Ziprasidone (Geodon)</th>
                                <th>Lurasidone (Latuda)</th>
                                <th>Paliperidone (Invega)</th>
                                <th>Risperidone (Risperdal)</th>
                                <th>Quetiapine (Seroquel)</th>
                                <th>Olanzapine (Zyprexa)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>When to Choose First</td>
                                <td><select data-answer="Metabolic concerns, weight neutral">
                                    <option value="">Select...</option>
                                    <option value="Metabolic concerns, weight neutral">Metabolic concerns, weight neutral</option>
                                    <option value="Bipolar depression, MDD adjunct">Bipolar depression, MDD adjunct</option>
                                    <option value="Need LAI formulation">Need LAI formulation</option>
                                    <option value="Psychosis with aggression">Psychosis with aggression</option>
                                    <option value="Psychosis with insomnia">Psychosis with insomnia</option>
                                    <option value="Treatment-resistant schizophrenia">Treatment-resistant schizophrenia</option>
                                </select></td>
                                <td><select data-answer="Bipolar depression, MDD adjunct">
                                    <option value="">Select...</option>
                                    <option value="Metabolic concerns, weight neutral">Metabolic concerns, weight neutral</option>
                                    <option value="Bipolar depression, MDD adjunct">Bipolar depression, MDD adjunct</option>
                                    <option value="Need LAI formulation">Need LAI formulation</option>
                                    <option value="Psychosis with aggression">Psychosis with aggression</option>
                                    <option value="Psychosis with insomnia">Psychosis with insomnia</option>
                                    <option value="Treatment-resistant schizophrenia">Treatment-resistant schizophrenia</option>
                                </select></td>
                                <td><select data-answer="Need LAI formulation">
                                    <option value="">Select...</option>
                                    <option value="Metabolic concerns, weight neutral">Metabolic concerns, weight neutral</option>
                                    <option value="Bipolar depression, MDD adjunct">Bipolar depression, MDD adjunct</option>
                                    <option value="Need LAI formulation">Need LAI formulation</option>
                                    <option value="Psychosis with aggression">Psychosis with aggression</option>
                                    <option value="Psychosis with insomnia">Psychosis with insomnia</option>
                                    <option value="Treatment-resistant schizophrenia">Treatment-resistant schizophrenia</option>
                                </select></td>
                                <td><select data-answer="Psychosis with aggression">
                                    <option value="">Select...</option>
                                    <option value="Metabolic concerns, weight neutral">Metabolic concerns, weight neutral</option>
                                    <option value="Bipolar depression, MDD adjunct">Bipolar depression, MDD adjunct</option>
                                    <option value="Need LAI formulation">Need LAI formulation</option>
                                    <option value="Psychosis with aggression">Psychosis with aggression</option>
                                    <option value="Psychosis with insomnia">Psychosis with insomnia</option>
                                    <option value="Treatment-resistant schizophrenia">Treatment-resistant schizophrenia</option>
                                </select></td>
                                <td><select data-answer="Psychosis with insomnia">
                                    <option value="">Select...</option>
                                    <option value="Metabolic concerns, weight neutral">Metabolic concerns, weight neutral</option>
                                    <option value="Bipolar depression, MDD adjunct">Bipolar depression, MDD adjunct</option>
                                    <option value="Need LAI formulation">Need LAI formulation</option>
                                    <option value="Psychosis with aggression">Psychosis with aggression</option>
                                    <option value="Psychosis with insomnia">Psychosis with insomnia</option>
                                    <option value="Treatment-resistant schizophrenia">Treatment-resistant schizophrenia</option>
                                </select></td>
                                <td><select data-answer="Treatment-resistant schizophrenia">
                                    <option value="">Select...</option>
                                    <option value="Metabolic concerns, weight neutral">Metabolic concerns, weight neutral</option>
                                    <option value="Bipolar depression, MDD adjunct">Bipolar depression, MDD adjunct</option>
                                    <option value="Need LAI formulation">Need LAI formulation</option>
                                    <option value="Psychosis with aggression">Psychosis with aggression</option>
                                    <option value="Psychosis with insomnia">Psychosis with insomnia</option>
                                    <option value="Treatment-resistant schizophrenia">Treatment-resistant schizophrenia</option>
                                </select></td>
                            </tr>
                            <tr>
                                <td>When to Avoid</td>
                                <td><select data-answer="QTc prolongation, cardiac history">
                                    <option value="">Select...</option>
                                    <option value="QTc prolongation, cardiac history">QTc prolongation, cardiac history</option>
                                    <option value="Renal impairment">Renal impairment</option>
                                    <option value="Severe renal/hepatic impairment">Severe renal/hepatic impairment</option>
                                    <option value="N/A (well tolerated)">N/A (well tolerated)</option>
                                    <option value="Diabetes, obesity">Diabetes, obesity</option>
                                    <option value="Metabolic syndrome, DM">Metabolic syndrome, DM</option>
                                </select></td>
                                <td><select data-answer="Renal impairment">
                                    <option value="">Select...</option>
                                    <option value="QTc prolongation, cardiac history">QTc prolongation, cardiac history</option>
                                    <option value="Renal impairment">Renal impairment</option>
                                    <option value="Severe renal/hepatic impairment">Severe renal/hepatic impairment</option>
                                    <option value="N/A (well tolerated)">N/A (well tolerated)</option>
                                    <option value="Diabetes, obesity">Diabetes, obesity</option>
                                    <option value="Metabolic syndrome, DM">Metabolic syndrome, DM</option>
                                </select></td>
                                <td><select data-answer="Severe renal/hepatic impairment">
                                    <option value="">Select...</option>
                                    <option value="QTc prolongation, cardiac history">QTc prolongation, cardiac history</option>
                                    <option value="Renal impairment">Renal impairment</option>
                                    <option value="Severe renal/hepatic impairment">Severe renal/hepatic impairment</option>
                                    <option value="N/A (well tolerated)">N/A (well tolerated)</option>
                                    <option value="Diabetes, obesity">Diabetes, obesity</option>
                                    <option value="Metabolic syndrome, DM">Metabolic syndrome, DM</option>
                                </select></td>
                                <td><select data-answer="N/A (well tolerated)">
                                    <option value="">Select...</option>
                                    <option value="QTc prolongation, cardiac history">QTc prolongation, cardiac history</option>
                                    <option value="Renal impairment">Renal impairment</option>
                                    <option value="Severe renal/hepatic impairment">Severe renal/hepatic impairment</option>
                                    <option value="N/A (well tolerated)">N/A (well tolerated)</option>
                                    <option value="Diabetes, obesity">Diabetes, obesity</option>
                                    <option value="Metabolic syndrome, DM">Metabolic syndrome, DM</option>
                                </select></td>
                                <td><select data-answer="Diabetes, obesity">
                                    <option value="">Select...</option>
                                    <option value="QTc prolongation, cardiac history">QTc prolongation, cardiac history</option>
                                    <option value="Renal impairment">Renal impairment</option>
                                    <option value="Severe renal/hepatic impairment">Severe renal/hepatic impairment</option>
                                    <option value="N/A (well tolerated)">N/A (well tolerated)</option>
                                    <option value="Diabetes, obesity">Diabetes, obesity</option>
                                    <option value="Metabolic syndrome, DM">Metabolic syndrome, DM</option>
                                </select></td>
                                <td><select data-answer="Metabolic syndrome, DM">
                                    <option value="">Select...</option>
                                    <option value="QTc prolongation, cardiac history">QTc prolongation, cardiac history</option>
                                    <option value="Renal impairment">Renal impairment</option>
                                    <option value="Severe renal/hepatic impairment">Severe renal/hepatic impairment</option>
                                    <option value="N/A (well tolerated)">N/A (well tolerated)</option>
                                    <option value="Diabetes, obesity">Diabetes, obesity</option>
                                    <option value="Metabolic syndrome, DM">Metabolic syndrome, DM</option>
                                </select></td>
                            </tr>
                            <tr>
                                <td>DC Challenge</td>
                                <td><select data-answer="Minimal withdrawal symptoms">
                                    <option value="">Select...</option>
                                    <option value="Minimal withdrawal symptoms">Minimal withdrawal symptoms</option>
                                    <option value="Nausea, akathisia rebound">Nausea, akathisia rebound</option>
                                    <option value="Slow taper to prevent relapse">Slow taper to prevent relapse</option>
                                    <option value="Taper to prevent EPS rebound">Taper to prevent EPS rebound</option>
                                    <option value="Rebound insomnia, anxiety">Rebound insomnia, anxiety</option>
                                    <option value="Cholinergic rebound, insomnia">Cholinergic rebound, insomnia</option>
                                </select></td>
                                <td><select data-answer="Nausea, akathisia rebound">
                                    <option value="">Select...</option>
                                    <option value="Minimal withdrawal symptoms">Minimal withdrawal symptoms</option>
                                    <option value="Nausea, akathisia rebound">Nausea, akathisia rebound</option>
                                    <option value="Slow taper to prevent relapse">Slow taper to prevent relapse</option>
                                    <option value="Taper to prevent EPS rebound">Taper to prevent EPS rebound</option>
                                    <option value="Rebound insomnia, anxiety">Rebound insomnia, anxiety</option>
                                    <option value="Cholinergic rebound, insomnia">Cholinergic rebound, insomnia</option>
                                </select></td>
                                <td><select data-answer="Slow taper to prevent relapse">
                                    <option value="">Select...</option>
                                    <option value="Minimal withdrawal symptoms">Minimal withdrawal symptoms</option>
                                    <option value="Nausea, akathisia rebound">Nausea, akathisia rebound</option>
                                    <option value="Slow taper to prevent relapse">Slow taper to prevent relapse</option>
                                    <option value="Taper to prevent EPS rebound">Taper to prevent EPS rebound</option>
                                    <option value="Rebound insomnia, anxiety">Rebound insomnia, anxiety</option>
                                    <option value="Cholinergic rebound, insomnia">Cholinergic rebound, insomnia</option>
                                </select></td>
                                <td><select data-answer="Taper to prevent EPS rebound">
                                    <option value="">Select...</option>
                                    <option value="Minimal withdrawal symptoms">Minimal withdrawal symptoms</option>
                                    <option value="Nausea, akathisia rebound">Nausea, akathisia rebound</option>
                                    <option value="Slow taper to prevent relapse">Slow taper to prevent relapse</option>
                                    <option value="Taper to prevent EPS rebound">Taper to prevent EPS rebound</option>
                                    <option value="Rebound insomnia, anxiety">Rebound insomnia, anxiety</option>
                                    <option value="Cholinergic rebound, insomnia">Cholinergic rebound, insomnia</option>
                                </select></td>
                                <td><select data-answer="Rebound insomnia, anxiety">
                                    <option value="">Select...</option>
                                    <option value="Minimal withdrawal symptoms">Minimal withdrawal symptoms</option>
                                    <option value="Nausea, akathisia rebound">Nausea, akathisia rebound</option>
                                    <option value="Slow taper to prevent relapse">Slow taper to prevent relapse</option>
                                    <option value="Taper to prevent EPS rebound">Taper to prevent EPS rebound</option>
                                    <option value="Rebound insomnia, anxiety">Rebound insomnia, anxiety</option>
                                    <option value="Cholinergic rebound, insomnia">Cholinergic rebound, insomnia</option>
                                </select></td>
                                <td><select data-answer="Cholinergic rebound, insomnia">
                                    <option value="">Select...</option>
                                    <option value="Minimal withdrawal symptoms">Minimal withdrawal symptoms</option>
                                    <option value="Nausea, akathisia rebound">Nausea, akathisia rebound</option>
                                    <option value="Slow taper to prevent relapse">Slow taper to prevent relapse</option>
                                    <option value="Taper to prevent EPS rebound">Taper to prevent EPS rebound</option>
                                    <option value="Rebound insomnia, anxiety">Rebound insomnia, anxiety</option>
                                    <option value="Cholinergic rebound, insomnia">Cholinergic rebound, insomnia</option>
                                </select></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="button-container">
                    <button class="btn btn-primary" onclick="checkAnswers(3)">Check Answers</button>
                    <button class="btn btn-secondary" onclick="resetMatrix(3)">Reset</button>
                </div>
                
                <div class="feedback" id="feedback3"></div>
            </div>
            
            <!-- Matrix 4: Mini Matrix C (Newer SGAs) -->
            <div class="matrix-section" id="matrix4">
                <h2 class="matrix-title">Matrix 4: Newer Second-Generation Antipsychotics</h2>
                <p class="matrix-description">Compare Newer SGAs ordered by metabolic burden (low to high)</p>
                
                <div class="matrix-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Characteristic</th>
                                <th>Aripiprazole (Abilify)</th>
                                <th>Brexpiprazole (Rexulti)</th>
                                <th>Cariprazine (Vraylar)</th>
                                <th>Lumateperone (Caplyta)</th>
                                <th>Asenapine (Saphris)</th>
                                <th>Iloperidone (Fanapt)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>When to Choose First</td>
                                <td><select data-answer="Metabolic concerns, want activation">
                                    <option value="">Select...</option>
                                    <option value="Metabolic concerns, want activation">Metabolic concerns, want activation</option>
                                    <option value="MDD adjunct, need tolerability">MDD adjunct, need tolerability</option>
                                    <option value="Bipolar depression, negative symptoms">Bipolar depression, negative symptoms</option>
                                    <option value="Schizophrenia, low side effects">Schizophrenia, low side effects</option>
                                    <option value="Bipolar mania, rapid onset">Bipolar mania, rapid onset</option>
                                    <option value="N/A (rarely first choice)">N/A (rarely first choice)</option>
                                </select></td>
                                <td><select data-answer="MDD adjunct, need tolerability">
                                    <option value="">Select...</option>
                                    <option value="Metabolic concerns, want activation">Metabolic concerns, want activation</option>
                                    <option value="MDD adjunct, need tolerability">MDD adjunct, need tolerability</option>
                                    <option value="Bipolar depression, negative symptoms">Bipolar depression, negative symptoms</option>
                                    <option value="Schizophrenia, low side effects">Schizophrenia, low side effects</option>
                                    <option value="Bipolar mania, rapid onset">Bipolar mania, rapid onset</option>
                                    <option value="N/A (rarely first choice)">N/A (rarely first choice)</option>
                                </select></td>
                                <td><select data-answer="Bipolar depression, negative symptoms">
                                    <option value="">Select...</option>
                                    <option value="Metabolic concerns, want activation">Metabolic concerns, want activation</option>
                                    <option value="MDD adjunct, need tolerability">MDD adjunct, need tolerability</option>
                                    <option value="Bipolar depression, negative symptoms">Bipolar depression, negative symptoms</option>
                                    <option value="Schizophrenia, low side effects">Schizophrenia, low side effects</option>
                                    <option value="Bipolar mania, rapid onset">Bipolar mania, rapid onset</option>
                                    <option value="N/A (rarely first choice)">N/A (rarely first choice)</option>
                                </select></td>
                                <td><select data-answer="Schizophrenia, low side effects">
                                    <option value="">Select...</option>
                                    <option value="Metabolic concerns, want activation">Metabolic concerns, want activation</option>
                                    <option value="MDD adjunct, need tolerability">MDD adjunct, need tolerability</option>
                                    <option value="Bipolar depression, negative symptoms">Bipolar depression, negative symptoms</option>
                                    <option value="Schizophrenia, low side effects">Schizophrenia, low side effects</option>
                                    <option value="Bipolar mania, rapid onset">Bipolar mania, rapid onset</option>
                                    <option value="N/A (rarely first choice)">N/A (rarely first choice)</option>
                                </select></td>
                                <td><select data-answer="Bipolar mania, rapid onset">
                                    <option value="">Select...</option>
                                    <option value="Metabolic concerns, want activation">Metabolic concerns, want activation</option>
                                    <option value="MDD adjunct, need tolerability">MDD adjunct, need tolerability</option>
                                    <option value="Bipolar depression, negative symptoms">Bipolar depression, negative symptoms</option>
                                    <option value="Schizophrenia, low side effects">Schizophrenia, low side effects</option>
                                    <option value="Bipolar mania, rapid onset">Bipolar mania, rapid onset</option>
                                    <option value="N/A (rarely first choice)">N/A (rarely first choice)</option>
                                </select></td>
                                <td><select data-answer="N/A (rarely first choice)">
                                    <option value="">Select...</option>
                                    <option value="Metabolic concerns, want activation">Metabolic concerns, want activation</option>
                                    <option value="MDD adjunct, need tolerability">MDD adjunct, need tolerability</option>
                                    <option value="Bipolar depression, negative symptoms">Bipolar depression, negative symptoms</option>
                                    <option value="Schizophrenia, low side effects">Schizophrenia, low side effects</option>
                                    <option value="Bipolar mania, rapid onset">Bipolar mania, rapid onset</option>
                                    <option value="N/A (rarely first choice)">N/A (rarely first choice)</option>
                                </select></td>
                            </tr>
                            <tr>
                                <td>When to Avoid</td>
                                <td><select data-answer="History of compulsive behaviors">
                                    <option value="">Select...</option>
                                    <option value="History of compulsive behaviors">History of compulsive behaviors</option>
                                    <option value="N/A (well tolerated)">N/A (well tolerated)</option>
                                    <option value="Severe hepatic/renal impairment">Severe hepatic/renal impairment</option>
                                    <option value="Dementia-related psychosis">Dementia-related psychosis</option>
                                    <option value="Hepatic impairment">Hepatic impairment</option>
                                    <option value="Cardiac disease, QTc risk">Cardiac disease, QTc risk</option>
                                </select></td>
                                <td><select data-answer="N/A (well tolerated)">
                                    <option value="">Select...</option>
                                    <option value="History of compulsive behaviors">History of compulsive behaviors</option>
                                    <option value="N/A (well tolerated)">N/A (well tolerated)</option>
                                    <option value="Severe hepatic/renal impairment">Severe hepatic/renal impairment</option>
                                    <option value="Dementia-related psychosis">Dementia-related psychosis</option>
                                    <option value="Hepatic impairment">Hepatic impairment</option>
                                    <option value="Cardiac disease, QTc risk">Cardiac disease, QTc risk</option>
                                </select></td>
                                <td><select data-answer="Severe hepatic/renal impairment">
                                    <option value="">Select...</option>
                                    <option value="History of compulsive behaviors">History of compulsive behaviors</option>
                                    <option value="N/A (well tolerated)">N/A (well tolerated)</option>
                                    <option value="Severe hepatic/renal impairment">Severe hepatic/renal impairment</option>
                                    <option value="Dementia-related psychosis">Dementia-related psychosis</option>
                                    <option value="Hepatic impairment">Hepatic impairment</option>
                                    <option value="Cardiac disease, QTc risk">Cardiac disease, QTc risk</option>
                                </select></td>
                                <td><select data-answer="Dementia-related psychosis">
                                    <option value="">Select...</option>
                                    <option value="History of compulsive behaviors">History of compulsive behaviors</option>
                                    <option value="N/A (well tolerated)">N/A (well tolerated)</option>
                                    <option value="Severe hepatic/renal impairment">Severe hepatic/renal impairment</option>
                                    <option value="Dementia-related psychosis">Dementia-related psychosis</option>
                                    <option value="Hepatic impairment">Hepatic impairment</option>
                                    <option value="Cardiac disease, QTc risk">Cardiac disease, QTc risk</option>
                                </select></td>
                                <td><select data-answer="Hepatic impairment">
                                    <option value="">Select...</option>
                                    <option value="History of compulsive behaviors">History of compulsive behaviors</option>
                                    <option value="N/A (well tolerated)">N/A (well tolerated)</option>
                                    <option value="Severe hepatic/renal impairment">Severe hepatic/renal impairment</option>
                                    <option value="Dementia-related psychosis">Dementia-related psychosis</option>
                                    <option value="Hepatic impairment">Hepatic impairment</option>
                                    <option value="Cardiac disease, QTc risk">Cardiac disease, QTc risk</option>
                                </select></td>
                                <td><select data-answer="Cardiac disease, QTc risk">
                                    <option value="">Select...</option>
                                    <option value="History of compulsive behaviors">History of compulsive behaviors</option>
                                    <option value="N/A (well tolerated)">N/A (well tolerated)</option>
                                    <option value="Severe hepatic/renal impairment">Severe hepatic/renal impairment</option>
                                    <option value="Dementia-related psychosis">Dementia-related psychosis</option>
                                    <option value="Hepatic impairment">Hepatic impairment</option>
                                    <option value="Cardiac disease, QTc risk">Cardiac disease, QTc risk</option>
                                </select></td>
                            </tr>
                            <tr>
                                <td>DC Challenge</td>
                                <td><select data-answer="Minimal (very long half-life)">
                                    <option value="">Select...</option>
                                    <option value="Minimal (very long half-life)">Minimal (very long half-life)</option>
                                    <option value="Minimal (long half-life)">Minimal (long half-life)</option>
                                    <option value="Very slow taper (long tÂ½)">Very slow taper (long tÂ½)</option>
                                    <option value="Gradual taper recommended">Gradual taper recommended</option>
                                    <option value="Taper to prevent rebound">Taper to prevent rebound</option>
                                    <option value="Slow taper, orthostasis risk">Slow taper, orthostasis risk</option>
                                </select></td>
                                <td><select data-answer="Minimal (long half-life)">
                                    <option value="">Select...</option>
                                    <option value="Minimal (very long half-life)">Minimal (very long half-life)</option>
                                    <option value="Minimal (long half-life)">Minimal (long half-life)</option>
                                    <option value="Very slow taper (long tÂ½)">Very slow taper (long tÂ½)</option>
                                    <option value="Gradual taper recommended">Gradual taper recommended</option>
                                    <option value="Taper to prevent rebound">Taper to prevent rebound</option>
                                    <option value="Slow taper, orthostasis risk">Slow taper, orthostasis risk</option>
                                </select></td>
                                <td><select data-answer="Very slow taper (long tÂ½)">
                                    <option value="">Select...</option>
                                    <option value="Minimal (very long half-life)">Minimal (very long half-life)</option>
                                    <option value="Minimal (long half-life)">Minimal (long half-life)</option>
                                    <option value="Very slow taper (long tÂ½)">Very slow taper (long tÂ½)</option>
                                    <option value="Gradual taper recommended">Gradual taper recommended</option>
                                    <option value="Taper to prevent rebound">Taper to prevent rebound</option>
                                    <option value="Slow taper, orthostasis risk">Slow taper, orthostasis risk</option>
                                </select></td>
                                <td><select data-answer="Gradual taper recommended">
                                    <option value="">Select...</option>
                                    <option value="Minimal (very long half-life)">Minimal (very long half-life)</option>
                                    <option value="Minimal (long half-life)">Minimal (long half-life)</option>
                                    <option value="Very slow taper (long tÂ½)">Very slow taper (long tÂ½)</option>
                                    <option value="Gradual taper recommended">Gradual taper recommended</option>
                                    <option value="Taper to prevent rebound">Taper to prevent rebound</option>
                                    <option value="Slow taper, orthostasis risk">Slow taper, orthostasis risk</option>
                                </select></td>
                                <td><select data-answer="Taper to prevent rebound">
                                    <option value="">Select...</option>
                                    <option value="Minimal (very long half-life)">Minimal (very long half-life)</option>
                                    <option value="Minimal (long half-life)">Minimal (long half-life)</option>
                                    <option value="Very slow taper (long tÂ½)">Very slow taper (long tÂ½)</option>
                                    <option value="Gradual taper recommended">Gradual taper recommended</option>
                                    <option value="Taper to prevent rebound">Taper to prevent rebound</option>
                                    <option value="Slow taper, orthostasis risk">Slow taper, orthostasis risk</option>
                                </select></td>
                                <td><select data-answer="Slow taper, orthostasis risk">
                                    <option value="">Select...</option>
                                    <option value="Minimal (very long half-life)">Minimal (very long half-life)</option>
                                    <option value="Minimal (long half-life)">Minimal (long half-life)</option>
                                    <option value="Very slow taper (long tÂ½)">Very slow taper (long tÂ½)</option>
                                    <option value="Gradual taper recommended">Gradual taper recommended</option>
                                    <option value="Taper to prevent rebound">Taper to prevent rebound</option>
                                    <option value="Slow taper, orthostasis risk">Slow taper, orthostasis risk</option>
                                </select></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="button-container">
                    <button class="btn btn-primary" onclick="checkAnswers(4)">Check Answers</button>
                    <button class="btn btn-secondary" onclick="resetMatrix(4)">Reset</button>
                </div>
                
                <div class="feedback" id="feedback4"></div>
            </div>
            
            <!-- Matrix 5: EPS Movement Disorders -->
            <div class="matrix-section" id="matrix5">
                <h2 class="matrix-title">Matrix 5: EPS Movement Disorders - Recognition & Treatment</h2>
                <p class="matrix-description">Compare different types of extrapyramidal symptoms</p>
                
                <div class="matrix-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Characteristic</th>
                                <th>Akathisia</th>
                                <th>Acute Dystonia</th>
                                <th>Parkinsonism</th>
                                <th>Tardive Dyskinesia</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Onset Timeline</td>
                                <td><select data-answer="Days to weeks">
                                    <option value="">Select...</option>
                                    <option value="Hours to days">Hours to days</option>
                                    <option value="Days to weeks">Days to weeks</option>
                                    <option value="Weeks to months">Weeks to months</option>
                                    <option value="Months to years">Months to years</option>
                                </select></td>
                                <td><select data-answer="Hours to days">
                                    <option value="">Select...</option>
                                    <option value="Hours to days">Hours to days</option>
                                    <option value="Days to weeks">Days to weeks</option>
                                    <option value="Weeks to months">Weeks to months</option>
                                    <option value="Months to years">Months to years</option>
                                </select></td>
                                <td><select data-answer="Weeks to months">
                                    <option value="">Select...</option>
                                    <option value="Hours to days">Hours to days</option>
                                    <option value="Days to weeks">Days to weeks</option>
                                    <option value="Weeks to months">Weeks to months</option>
                                    <option value="Months to years">Months to years</option>
                                </select></td>
                                <td><select data-answer="Months to years">
                                    <option value="">Select...</option>
                                    <option value="Hours to days">Hours to days</option>
                                    <option value="Days to weeks">Days to weeks</option>
                                    <option value="Weeks to months">Weeks to months</option>
                                    <option value="Months to years">Months to years</option>
                                </select></td>
                            </tr>
                            <tr>
                                <td>When Risk is Highest</td>
                                <td><select data-answer="Dose increase, first weeks">
                                    <option value="">Select...</option>
                                    <option value="First dose, rapid titration">First dose, rapid titration</option>
                                    <option value="Dose increase, first weeks">Dose increase, first weeks</option>
                                    <option value="Steady-state treatment">Steady-state treatment</option>
                                    <option value="Long-term use, elderly">Long-term use, elderly</option>
                                </select></td>
                                <td><select data-answer="First dose, rapid titration">
                                    <option value="">Select...</option>
                                    <option value="First dose, rapid titration">First dose, rapid titration</option>
                                    <option value="Dose increase, first weeks">Dose increase, first weeks</option>
                                    <option value="Steady-state treatment">Steady-state treatment</option>
                                    <option value="Long-term use, elderly">Long-term use, elderly</option>
                                </select></td>
                                <td><select data-answer="Steady-state treatment">
                                    <option value="">Select...</option>
                                    <option value="First dose, rapid titration">First dose, rapid titration</option>
                                    <option value="Dose increase, first weeks">Dose increase, first weeks</option>
                                    <option value="Steady-state treatment">Steady-state treatment</option>
                                    <option value="Long-term use, elderly">Long-term use, elderly</option>
                                </select></td>
                                <td><select data-answer="Long-term use, elderly">
                                    <option value="">Select...</option>
                                    <option value="First dose, rapid titration">First dose, rapid titration</option>
                                    <option value="Dose increase, first weeks">Dose increase, first weeks</option>
                                    <option value="Steady-state treatment">Steady-state treatment</option>
                                    <option value="Long-term use, elderly">Long-term use, elderly</option>
                                </select></td>
                            </tr>
                            <tr>
                                <td>Clinical Presentation</td>
                                <td><select data-answer="Restlessness, can't sit still">
                                    <option value="">Select...</option>
                                    <option value="Muscle spasms, torticollis">Muscle spasms, torticollis</option>
                                    <option value="Restlessness, can't sit still">Restlessness, can't sit still</option>
                                    <option value="Bradykinesia, tremor, rigidity">Bradykinesia, tremor, rigidity</option>
                                    <option value="Tongue protrusion, facial grimacing">Tongue protrusion, facial grimacing</option>
                                </select></td>
                                <td><select data-answer="Muscle spasms, torticollis">
                                    <option value="">Select...</option>
                                    <option value="Muscle spasms, torticollis">Muscle spasms, torticollis</option>
                                    <option value="Restlessness, can't sit still">Restlessness, can't sit still</option>
                                    <option value="Bradykinesia, tremor, rigidity">Bradykinesia, tremor, rigidity</option>
                                    <option value="Tongue protrusion, facial grimacing">Tongue protrusion, facial grimacing</option>
                                </select></td>
                                <td><select data-answer="Bradykinesia, tremor, rigidity">
                                    <option value="">Select...</option>
                                    <option value="Muscle spasms, torticollis">Muscle spasms, torticollis</option>
                                    <option value="Restlessness, can't sit still">Restlessness, can't sit still</option>
                                    <option value="Bradykinesia, tremor, rigidity">Bradykinesia, tremor, rigidity</option>
                                    <option value="Tongue protrusion, facial grimacing">Tongue protrusion, facial grimacing</option>
                                </select></td>
                                <td><select data-answer="Tongue protrusion, facial grimacing">
                                    <option value="">Select...</option>
                                    <option value="Muscle spasms, torticollis">Muscle spasms, torticollis</option>
                                    <option value="Restlessness, can't sit still">Restlessness, can't sit still</option>
                                    <option value="Bradykinesia, tremor, rigidity">Bradykinesia, tremor, rigidity</option>
                                    <option value="Tongue protrusion, facial grimacing">Tongue protrusion, facial grimacing</option>
                                </select></td>
                            </tr>
                            <tr>
                                <td>Which Antipsychotics Cause It Most</td>
                                <td><select data-answer="All, esp. high-potency FGAs">
                                    <option value="">Select...</option>
                                    <option value="High-potency FGAs (haloperidol)">High-potency FGAs (haloperidol)</option>
                                    <option value="All, esp. high-potency FGAs">All, esp. high-potency FGAs</option>
                                    <option value="FGAs, risperidone, paliperidone">FGAs, risperidone, paliperidone</option>
                                    <option value="All, higher with FGAs">All, higher with FGAs</option>
                                </select></td>
                                <td><select data-answer="High-potency FGAs (haloperidol)">
                                    <option value="">Select...</option>
                                    <option value="High-potency FGAs (haloperidol)">High-potency FGAs (haloperidol)</option>
                                    <option value="All, esp. high-potency FGAs">All, esp. high-potency FGAs</option>
                                    <option value="FGAs, risperidone, paliperidone">FGAs, risperidone, paliperidone</option>
                                    <option value="All, higher with FGAs">All, higher with FGAs</option>
                                </select></td>
                                <td><select data-answer="FGAs, risperidone, paliperidone">
                                    <option value="">Select...</option>
                                    <option value="High-potency FGAs (haloperidol)">High-potency FGAs (haloperidol)</option>
                                    <option value="All, esp. high-potency FGAs">All, esp. high-potency FGAs</option>
                                    <option value="FGAs, risperidone, paliperidone">FGAs, risperidone, paliperidone</option>
                                    <option value="All, higher with FGAs">All, higher with FGAs</option>
                                </select></td>
                                <td><select data-answer="All, higher with FGAs">
                                    <option value="">Select...</option>
                                    <option value="High-potency FGAs (haloperidol)">High-potency FGAs (haloperidol)</option>
                                    <option value="All, esp. high-potency FGAs">All, esp. high-potency FGAs</option>
                                    <option value="FGAs, risperidone, paliperidone">FGAs, risperidone, paliperidone</option>
                                    <option value="All, higher with FGAs">All, higher with FGAs</option>
                                </select></td>
                            </tr>
                            <tr>
                                <td>Treatment/Management</td>
                                <td><select data-answer="Reduce dose, propranolol, benzos">
                                    <option value="">Select...</option>
                                    <option value="Benadryl IM, benztropine">Benadryl IM, benztropine</option>
                                    <option value="Reduce dose, propranolol, benzos">Reduce dose, propranolol, benzos</option>
                                    <option value="Reduce dose, add benztropine">Reduce dose, add benztropine</option>
                                    <option value="Stop med, switch to quetiapine">Stop med, switch to quetiapine</option>
                                </select></td>
                                <td><select data-answer="Benadryl IM, benztropine">
                                    <option value="">Select...</option>
                                    <option value="Benadryl IM, benztropine">Benadryl IM, benztropine</option>
                                    <option value="Reduce dose, propranolol, benzos">Reduce dose, propranolol, benzos</option>
                                    <option value="Reduce dose, add benztropine">Reduce dose, add benztropine</option>
                                    <option value="Stop med, switch to quetiapine">Stop med, switch to quetiapine</option>
                                </select></td>
                                <td><select data-answer="Reduce dose, add benztropine">
                                    <option value="">Select...</option>
                                    <option value="Benadryl IM, benztropine">Benadryl IM, benztropine</option>
                                    <option value="Reduce dose, propranolol, benzos">Reduce dose, propranolol, benzos</option>
                                    <option value="Reduce dose, add benztropine">Reduce dose, add benztropine</option>
                                    <option value="Stop med, switch to quetiapine">Stop med, switch to quetiapine</option>
                                </select></td>
                                <td><select data-answer="Stop med, switch to quetiapine">
                                    <option value="">Select...</option>
                                    <option value="Benadryl IM, benztropine">Benadryl IM, benztropine</option>
                                    <option value="Reduce dose, propranolol, benzos">Reduce dose, propranolol, benzos</option>
                                    <option value="Reduce dose, add benztropine">Reduce dose, add benztropine</option>
                                    <option value="Stop med, switch to quetiapine">Stop med, switch to quetiapine</option>
                                </select></td>
                            </tr>
                            <tr>
                                <td>Reversibility</td>
                                <td><select data-answer="Reversible with treatment">
                                    <option value="">Select...</option>
                                    <option value="Fully reversible immediately">Fully reversible immediately</option>
                                    <option value="Reversible with treatment">Reversible with treatment</option>
                                    <option value="Usually reversible with time">Usually reversible with time</option>
                                    <option value="Often permanent">Often permanent</option>
                                </select></td>
                                <td><select data-answer="Fully reversible immediately">
                                    <option value="">Select...</option>
                                    <option value="Fully reversible immediately">Fully reversible immediately</option>
                                    <option value="Reversible with treatment">Reversible with treatment</option>
                                    <option value="Usually reversible with time">Usually reversible with time</option>
                                    <option value="Often permanent">Often permanent</option>
                                </select></td>
                                <td><select data-answer="Usually reversible with time">
                                    <option value="">Select...</option>
                                    <option value="Fully reversible immediately">Fully reversible immediately</option>
                                    <option value="Reversible with treatment">Reversible with treatment</option>
                                    <option value="Usually reversible with time">Usually reversible with time</option>
                                    <option value="Often permanent">Often permanent</option>
                                </select></td>
                                <td><select data-answer="Often permanent">
                                    <option value="">Select...</option>
                                    <option value="Fully reversible immediately">Fully reversible immediately</option>
                                    <option value="Reversible with treatment">Reversible with treatment</option>
                                    <option value="Usually reversible with time">Usually reversible with time</option>
                                    <option value="Often permanent">Often permanent</option>
                                </select></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="button-container">
                    <button class="btn btn-primary" onclick="checkAnswers(5)">Check Answers</button>
                    <button class="btn btn-secondary" onclick="resetMatrix(5)">Reset</button>
                </div>
                
                <div class="feedback" id="feedback5"></div>
            </div>
            
            <!-- Certificate Section -->
            <div class="certificate" id="certificate">
                <h2>ðŸŽ“ Certificate of Completion</h2>
                <p style="font-size: 1.3em; margin: 20px 0;">This certifies that</p>
                <div class="student-name-display" id="certStudentName"></div>
                <p style="font-size: 1.1em; line-height: 1.8;">has successfully completed all five Antipsychotic Medication Matrices with 100% accuracy, demonstrating mastery of antipsychotic pharmacology including mechanism of action, clinical positioning, side effect profiles, and extrapyramidal symptom management.</p>
                
                <table class="completion-table">
                    <tr>
                        <td>Matrix 1: Core Foundations</td>
                        <td id="cert-time1"></td>
                    </tr>
                    <tr>
                        <td>Matrix 2: First-Generation Antipsychotics</td>
                        <td id="cert-time2"></td>
                    </tr>
                    <tr>
                        <td>Matrix 3: Classic Second-Generation</td>
                        <td id="cert-time3"></td>
                    </tr>
                    <tr>
                        <td>Matrix 4: Newer Second-Generation</td>
                        <td id="cert-time4"></td>
                    </tr>
                    <tr>
                        <td>Matrix 5: EPS Movement Disorders</td>
                        <td id="cert-time5"></td>
                    </tr>
                </table>
                
                <div class="completion-date" id="finalCompletionDate"></div>
                
                <div class="pdf-instructions">
                    <h3>ðŸ“„ To Submit For Credit:</h3>
                    <ol>
                        <li>Press <strong>Ctrl+P</strong> (Windows) or <strong>Cmd+P</strong> (Mac)</li>
                        <li>Select <strong>"Save as PDF"</strong> as your printer/destination</li>
                        <li>Save the file as: <strong>YourName_AntipsychoticMatrices_[Date]</strong></li>
                        <li>Upload the PDF to the D2L assignment dropbox</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // State management
        const state = {
            studentName: '',
            studentEmail: '',
            currentMatrix: 1,
            completedMatrices: [],
            completionTimes: {}
        };
        
        // Load state from localStorage
        function loadState() {
            const saved = localStorage.getItem('antipsychoticMatrices');
            if (saved) {
                const parsed = JSON.parse(saved);
                Object.assign(state, parsed);
                
                // If student info exists, skip to main content
                if (state.studentName && state.studentEmail) {
                    document.getElementById('studentInfoSection').style.display = 'none';
                    document.getElementById('mainContent').style.display = 'block';
                    updateUI();
                }
            }
        }
        
        // Save state to localStorage
        function saveState() {
            localStorage.setItem('antipsychoticMatrices', JSON.stringify(state));
        }
        
        // Save student information
        function saveStudentInfo() {
            const name = document.getElementById('studentName').value.trim();
            const email = document.getElementById('studentEmail').value.trim();
            
            if (!name || !email) {
                alert('Please enter both your name and email.');
                return;
            }
            
            if (!email.includes('@')) {
                alert('Please enter a valid email address.');
                return;
            }
            
            state.studentName = name;
            state.studentEmail = email;
            saveState();
            
            document.getElementById('studentInfoSection').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            updateUI();
        }
        
        // Initialize navigation
        function initNav() {
            const navContainer = document.getElementById('matrixNav');
            const matrices = [
                'Core Foundations',
                'FGAs',
                'Classic SGAs',
                'Newer SGAs',
                'EPS Disorders'
            ];
            
            matrices.forEach((name, index) => {
                const button = document.createElement('button');
                button.className = 'nav-button';
                button.textContent = `${index + 1}. ${name}`;
                button.onclick = () => navigateToMatrix(index + 1);
                button.id = `nav-${index + 1}`;
                navContainer.appendChild(button);
            });
        }
        
        // Navigate to specific matrix
        function navigateToMatrix(matrixNum) {
            // Check if matrix is unlocked
            if (matrixNum > 1 && !state.completedMatrices.includes(matrixNum - 1)) {
                alert(`Please complete Matrix ${matrixNum - 1} first.`);
                return;
            }
            
            state.currentMatrix = matrixNum;
            updateUI();
        }
        
        // Update UI
        function updateUI() {
            // Hide all matrices
            document.querySelectorAll('.matrix-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show current matrix or certificate
            if (state.completedMatrices.length === 5) {
                showCertificate();
            } else {
                document.getElementById(`matrix${state.currentMatrix}`).classList.add('active');
            }
            
            // Update navigation buttons
            for (let i = 1; i <= 5; i++) {
                const btn = document.getElementById(`nav-${i}`);
                btn.classList.remove('active', 'completed', 'locked');
                
                if (state.completedMatrices.includes(i)) {
                    btn.classList.add('completed');
                } else if (i === state.currentMatrix) {
                    btn.classList.add('active');
                } else if (i > 1 && !state.completedMatrices.includes(i - 1)) {
                    btn.classList.add('locked');
                }
            }
            
            // Update progress bar
            const progress = (state.completedMatrices.length / 5) * 100;
            const progressFill = document.getElementById('progressFill');
            progressFill.style.width = `${progress}%`;
            progressFill.textContent = `${state.completedMatrices.length} of 5 completed`;
            
            saveState();
        }
        
        // Check answers for a matrix
        function checkAnswers(matrixNum) {
            const matrix = document.getElementById(`matrix${matrixNum}`);
            const selects = matrix.querySelectorAll('select');
            let allCorrect = true;
            let answeredAll = true;
            
            selects.forEach(select => {
                select.classList.remove('correct', 'incorrect');
                
                if (!select.value) {
                    answeredAll = false;
                    return;
                }
                
                const correctAnswer = select.dataset.answer;
                if (select.value === correctAnswer) {
                    select.classList.add('correct');
                } else {
                    select.classList.add('incorrect');
                    allCorrect = false;
                }
            });
            
            const feedback = document.getElementById(`feedback${matrixNum}`);
            feedback.style.display = 'block';
            
            if (!answeredAll) {
                feedback.className = 'feedback error';
                feedback.textContent = 'Please answer all questions before checking.';
            } else if (allCorrect) {
                feedback.className = 'feedback success';
                feedback.textContent = 'ðŸŽ‰ Perfect! All answers correct. You can now proceed to the next matrix.';
                
                // Mark as completed
                if (!state.completedMatrices.includes(matrixNum)) {
                    state.completedMatrices.push(matrixNum);
                    state.completionTimes[`matrix${matrixNum}`] = new Date().toLocaleString();
                    
                    // Move to next matrix or show certificate
                    setTimeout(() => {
                        if (matrixNum < 5) {
                            state.currentMatrix = matrixNum + 1;
                            updateUI();
                        } else {
                            updateUI(); // Will show certificate
                        }
                    }, 2000);
                }
            } else {
                feedback.className = 'feedback error';
                feedback.textContent = 'âŒ Some answers are incorrect. Please review the highlighted cells and try again.';
            }
        }
        
        // Reset matrix
        function resetMatrix(matrixNum) {
            const matrix = document.getElementById(`matrix${matrixNum}`);
            const selects = matrix.querySelectorAll('select');
            
            selects.forEach(select => {
                select.value = '';
                select.classList.remove('correct', 'incorrect');
            });
            
            const feedback = document.getElementById(`feedback${matrixNum}`);
            feedback.style.display = 'none';
        }
        
        // Show certificate
        function showCertificate() {
            document.querySelectorAll('.matrix-section').forEach(section => {
                section.style.display = 'none';
            });
            
            const certificate = document.getElementById('certificate');
            certificate.classList.add('active');
            
            // Fill in certificate details
            document.getElementById('certStudentName').textContent = state.studentName;
            
            for (let i = 1; i <= 5; i++) {
                const time = state.completionTimes[`matrix${i}`] || 'Not completed';
                document.getElementById(`cert-time${i}`).textContent = time;
            }
            
            document.getElementById('finalCompletionDate').textContent = 
                `Certificate issued: ${new Date().toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                })}`;
        }
        
        // Initialize on page load
        window.onload = function() {
            loadState();
            initNav();
            
            if (state.studentName && state.studentEmail) {
                updateUI();
            }
        };
    </script>
</body>
</html>
